import{W as _,r as h,j as a}from"./app-BqIElpsO.js";import{C as o}from"./Checkbox-C6qhQsal.js";import{T as k,M as y,I as w}from"./TranslatableBlockInput-B1ukecTr.js";import{I as i}from"./InputLabel-Cd1T0gtO.js";import{P as F}from"./PrimaryButton-BiIIiD2p.js";import{T as n}from"./TextInput-BLIKgOIi.js";import{T as C}from"./TranslatableInput-uY107Hcp.js";import{A as S}from"./AuthenticatedLayout-EqF7CAfj.js";import"./button-Dx895b2C.js";import"./index-DlCV_gpW.js";import"./utils-Dj4vKr9q.js";import"./leaflet-BDAEz313.js";import"./SecondaryButton-B6ScGHgZ.js";import"./index-C-Bv36gV.js";import"./ApplicationLogo-DpaQvfOj.js";import"./logo-Cr4xRgwm.js";import"./transition-BfQpwgu_.js";const V=({counties:c,types:x,hashtagGroups:p})=>{const{data:r,setData:s,post:v,reset:j}=_({name:{hr:"",en:""},description:{hr:"",en:""},featured:!1,estate_type_id:void 0,price:0,area:0,year_built:void 0,year_renovated:void 0,parking_available:!1,parking_spaces:void 0,rooms:void 0,area_id:void 0,owner_name:"",owner_contact:"",address:"",radius:100,coordinates:void 0,hashtags:[],images:[],video:void 0}),g=e=>{if(e.preventDefault(),!r.estate_type_id){alert("Potrebno je odabrati tip nekretnine");return}if(!r.area_id){alert("Potrebno je odabrati lokaciju");return}if(!r.area_id)return alert("Potrebno je unijeti lokaciju");v(route("real-estate.store"),{onSuccess:()=>j(),forceFormData:!0})},[l,N]=h.useState(),[d,u]=h.useState();return a.jsx(S,{header:"Kreiraj Nekretninu",children:a.jsx("div",{className:"p-8",children:a.jsxs("form",{encType:"multipart/form-data",onSubmit:g,children:[a.jsx(C,{label:"Naziv",setData:s,value:r}),a.jsx(k,{value:r,label:"Opis",setData:s}),a.jsxs("div",{className:"flex flex-row items-center gap-x-4",children:[a.jsxs(i,{htmlFor:"featured",className:"text-lg mt-4",children:[a.jsx(o,{className:"mr-2",id:"featured",name:"featured",checked:r.featured,onChange:e=>s("featured",e.target.checked)}),"Istaknuto?"]}),a.jsxs(i,{htmlFor:"parkingAvailable",className:"text-lg mt-4",children:[a.jsx(o,{className:"mr-2",id:"parkingAvailable",name:"parkingAvailable",checked:r.parking_available,onChange:e=>s("parking_available",e.target.checked)}),"Parking?"]}),r.parking_available&&a.jsxs(i,{htmlFor:"parkingSpaces",className:"text-lg mt-4",children:["Broj mjesta?",a.jsx(n,{className:"ml-2 w-16",id:"parkingSpaces",required:r.parking_available,name:"parkingSpaces",value:r.parking_spaces,onChange:e=>s("parking_spaces",isNaN(Number(e.target.value))?0:Number(e.target.value))})]}),a.jsxs(i,{htmlFor:"rooms",className:"text-lg mt-4",children:["Broj Soba?",a.jsx(n,{className:"ml-2 w-16",id:"rooms",name:"rooms",value:r.rooms,onChange:e=>s("rooms",isNaN(Number(e.target.value))?0:Number(e.target.value))})]}),a.jsxs(i,{htmlFor:"area",className:"text-lg mt-4",children:["Površina",a.jsx(n,{className:"ml-2 w-16",id:"area",required:!0,name:"area",value:r.area,onChange:e=>s("area",isNaN(Number(e.target.value))?0:Number(e.target.value))})]}),a.jsxs(i,{htmlFor:"price",className:"text-lg mt-4",children:["Cijena",a.jsx(n,{required:!0,className:"ml-2 w-16",id:"price",name:"price",value:r.price,onChange:e=>s("price",isNaN(Number(e.target.value))?0:Number(e.target.value))})]}),a.jsxs(i,{htmlFor:"yearBuilt",className:"text-lg mt-4",children:["Godina Izgradnje",a.jsx(n,{className:"ml-2 w-16",id:"yearBuilt",type:"text",name:"yearBuilt",value:r.year_built,onChange:e=>{s("year_built",e.target.value)}})]}),a.jsxs(i,{htmlFor:"yearRenovated",className:"text-lg mt-4",children:["Godina Zadnje Renovacije",a.jsx(n,{className:"ml-2 w-16",id:"yearRenovated",name:"yearRenovated",value:r.year_renovated,onChange:e=>{s("year_renovated",e.target.value)}})]})]}),a.jsx("div",{className:"flex flex-row items-center gap-x-4 my-4",children:a.jsxs(i,{htmlFor:"estateType",className:"text-lg",children:["Tip Nekretnine",a.jsxs("select",{id:"estateType",name:"estateType",className:"rounded-md ml-4",value:r==null?void 0:r.estate_type_id,required:!0,onChange:e=>{s("estate_type_id",Number(e.target.value))},children:[a.jsx("option",{hidden:!0,value:void 0,children:"Odaberi Tip"}),x.map(e=>a.jsx("option",{value:e.id,children:e.name.hr},e.id))]})]})}),a.jsxs("div",{className:"grid grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"p-4",children:["Podaci o vlasniku",a.jsxs("div",{className:"pl-4 pt-2",children:[a.jsxs(i,{htmlFor:"ownerName",className:"text-lg",children:["Ime i Prezine",a.jsx(n,{className:"ml-2",id:"ownerName",name:"ownerName",required:!0,value:r.owner_name,onChange:e=>s("owner_name",e.target.value)})]}),a.jsxs(i,{htmlFor:"ownerContact",className:"text-lg mt-4",children:["Kontakt",a.jsx(n,{className:"ml-2 ",id:"ownerContact",required:!0,name:"ownerContact",value:r.owner_contact,onChange:e=>s("owner_contact",e.target.value)})]})]})]}),a.jsxs("div",{className:"p-4",children:["Lokacija",a.jsxs("div",{className:"pl-4 pt-2 flex flex-col gap-y-4",children:[a.jsxs(i,{htmlFor:"county",className:"text-lg",children:["Županija",a.jsxs("select",{id:"county",name:"county",required:!0,className:"rounded-md ml-4",value:l==null?void 0:l.id,onChange:e=>{N(c.find(t=>String(t.id)===e.target.value)),u(void 0)},children:[a.jsx("option",{hidden:!0,value:void 0,children:"Odaberi Županiju"}),c.map(e=>a.jsx("option",{value:e.id,children:e.name.hr},e.id))]})]}),a.jsxs(i,{htmlFor:"city",className:"text-lg",children:["Grad",l==null?void 0:l.id,a.jsxs("select",{id:"city",required:!0,disabled:!l,name:"city",value:d==null?void 0:d.id,className:"rounded-md ml-4",onChange:e=>{u(l==null?void 0:l.cities.find(t=>String(t.id)===e.target.value)),s("area_id",void 0)},children:[a.jsx("option",{hidden:!0,value:void 0,children:"Odaberi Grad"}),l==null?void 0:l.cities.map(e=>a.jsx("option",{value:e.id,children:e.name}))]})]}),a.jsxs(i,{htmlFor:"area",className:"text-lg",children:["Naselje",a.jsxs("select",{id:"area",name:"area",className:"rounded-md ml-4",required:!0,disabled:!d,onChange:e=>{console.log(e.currentTarget.value),s("area_id",Number(e.currentTarget.value))},value:r.area_id,children:[a.jsx("option",{hidden:!0,value:void 0,children:"Odaberi Naselje"}),d==null?void 0:d.areas.map(e=>a.jsx("option",{value:e.id,children:e.name}))]})]}),a.jsxs(i,{htmlFor:"address",className:"text-lg",children:["Adresa",a.jsx(n,{className:"ml-2",id:"address",name:"address",required:!0,value:r.address,onChange:e=>s("address",e.target.value)})]}),a.jsxs(i,{htmlFor:"radius",className:"text-lg",children:["Radius",a.jsx(n,{className:"ml-2",id:"radius",type:"range",min:1,max:1e4,name:"radius",value:r.radius,onChange:e=>s("radius",Number(e.target.value))}),a.jsx(n,{className:"ml-2",id:"radius",type:"number",min:0,max:1e4,name:"radius",value:r.radius,onChange:e=>s("radius",Math.max(0,Math.min(Number(e.target.value),1e4)))})]}),a.jsx(y,{setData:e=>s("coordinates",e),value:r.coordinates,address:r.address,area:d==null?void 0:d.areas.find(e=>e.id===r.area_id),county:l,radius:r.radius})]})]})]}),a.jsxs("div",{className:"h-full",children:[a.jsx("p",{className:"py-2 text-left",children:"Hashtags"}),p.map(e=>a.jsxs("div",{children:[e.name.hr,a.jsx("div",{className:"px-4 grid grid-cols-4 mb-4",children:e.hashtags.map(t=>a.jsxs(i,{htmlFor:`${e.id}_${t.id}`,children:[a.jsx(o,{className:"mr-2",id:`${e.id}_${t.id}`,name:`${e.id}_${t.id}`,defaultChecked:r.hashtags.includes(t.id),onChange:m=>{const b=m.target.checked;s("hashtags",b?[...r.hashtags,t.id]:r.hashtags.filter(f=>f!==t.id))}}),t.name.hr]},`${e.id}_${t.id}`))})]},"Group_"+e.id))]})]}),a.jsx(w,{images:r.images,setImages:e=>s("images",e)}),a.jsx("p",{className:"mt-8",children:"Video"}),a.jsx(n,{type:"file",accept:"video/*",onChange:e=>{var t,m;s("video",(m=(t=e==null?void 0:e.target)==null?void 0:t.files)==null?void 0:m[0])}}),a.jsx("div",{className:"w-full flex items-end justify-end",children:a.jsx(F,{className:"mt-4 ml-auto",type:"submit",children:"Spremi"})})]})})})};export{V as default};
